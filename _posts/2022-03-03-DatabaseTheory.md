---
layout: post
title: "데이터베이스 이론 01"
---

## 대학 DB THEORY 정리

```js
DBMS ( Data Base Management System)
- 사용자와 DB 사이에서 사용자의 요구에 따라 정보를 생성해주고, DB 를 관리 해주는 소프트웨어
- 기존의 파일 시스템이 갖는 데이터의 종속성과 중복성의 문제를 해결하기 위해 제안된 시스템

-- 모든 응용 프로그램들이 DB 를 공용할 수 있도록 관리해줌
-- 데이터베이스의 구성, 접근방법, 유지관리에 대한 모든 책임을 짐

---등장배경 - 종속성으로 인한 문제점과 중복성으로 인한 문제점을 해결하기 위해 등장 (데이터의 정확성을 유지해주기 위해)

----------------------------------------------------------------------------------------------------
DBMS 필수 기능
- 정의(DDL) , 조작(DML) , 제어(DCL)
정의(CREATE,ALTER,DROP)
= 데이터 형과 구조, 데이터가 DB에 저장될때의 제약조건등을 명시하는 기능
조작(SELECT,INSERT,DELETE,UPDATE)
= 데이터 검색, 갱신, 삽입 , 삭제등을 처리하기위해 사용자와 데이터베이스 수단을 제공하는 기능
제어(COMMIT,ROLLBACK,GRANT,REVOKE)
= 각 작업이 진행될때 데이터의 무결성이 유지되도록 제어해야함
= 보안을 유지하고 권한을 검사할수있도록해야함
= 여러 사용자가 디비를 동시에 접근해 데이터를 처리할 경우 처리결과가 항상 정확성을 유지하도록 병행 제어를 할수있어야함

----------------------------------------------------------------------------------------------------
트랜잭션(안전하게 수행되야하는걸 보장하기 위한 성질)
- 데이터베이스의 상태를 변경시키기 위해 수행하는 작업 단위
(변경시킨다는 의미 = SELECT, UPDATE, INSERT, DELETE 같은 행동을 뜻함)
(하나의 트랜잭션은 Commit 되거나 Rollback 될 수 있음)

--트랜잭션 특징 SQL(ACID)
A - Atomicity(원자성) = 회복
(트랜잭션의 연산은 디비에 모두 반영되던지 아니면 전혀 반영되지 않아야 함)
(트랜잭션 내의 모든 명령은 반드시 완벽하게 수행되어야하며, 모두가 완벽히 수행되지않고 어느하나라도 오류발생된다면 트랜잭션 전부가 취소되어야함)
C - Consistency(일관성) = 동시성제어 , 무결성 제약조건
(트랜잭션이 그 실행을 성공적으로 완료한다면 언제나 일관성있는 디비 상태로 변환함)
I - Isolation(격리성,고립성) = 동시성 제어
(둘 이상의 트랜잭션이 동시에 병행 실행되는 경우 어느 하나의 트랜잭션 실행 중에 다른 트랜잭션의 연산이 끼어들 수 없음)
D - Durability(영속성,지속성) = 회복
(성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 함)

NoSQL(BASE) 특징
B,A - Basically(원래) Available = 기본적으로 Available(사용가능)하고
S - Soft-state = 사용자가 관리하지 않으면 Data 가 expire(유실?내쉬다?) 될 수 있으며
E - Eventually(결국) consistency(일관성) = 지금 당장은 아니지만 언젠가는 Data 가 일관성을 가진다.

NoSQL
- 데이터를 저장하는 방법에는 여러가지가있으며 sql 만 사용하여 저장하지 않는다는 의미를 담음
- 일반적으로 api 를 호출하여 저장을 함
- 최적화된 공간 = 단순 검색 및 추가 작업을 위한 최적화된 키 값 저장공간
- 분산 저장 = 트래픽 증가에 따른 비용에 효율적인 Scale-out  지원
- Schemaless = RDBMS 와 같은 스키가 구조를 가지고있지 않기에 개발 진척에 따른 스키마 변화에 FLEXIBLE(유연함) 함
----------------------------------------------------------------------------------------------------
논리 데이터 베이스 설계 / 데이터베이스 설계
-DBMS 독립적-   요구 조건 분석  [용도파악&데이터의종류&용도&처리형태&흐름&제약조건등 수집]
-DBMS 독립적-   요구 조건 명세
-DBMS 독립적-   개념적 설계   -- E-R 모델이나옴 [추상적 개념으로 표현하는 과정]
-DBMS 독립적-   개념적 스키마 [E-R도형]
-              논리적 설계 -- DBMS의 특성을 고려함 , 관계 DBMS 에서 E-R 도형을 릴레이션들로 사상(mapping) [테이블을 설계하는단계]
-DBMS 의존적-   논리적 스키마(관계 데이터베이스 스키마)
-DBMS 의존적-   정규화
-DBMS 의존적-   정규화된 릴레이션들
-DBMS 의존적-   물리적 설계  [DMBS에 맞는 물리적 구조,데이터 구조화]
-DBMS 의존적-   물리적 스키마
-DBMS 의존적-   데이터베이스 구현 [DDL 로 데이터베이스 생성]

요구사항을 분석해서 실제 데이터베이스를 구현하는 과정을 전체 설계 과정이라고 하는데 그 중간에 개, 논, 물. 우리가 개념적 설계 단계, 논리적 설계 단계, 물리적 설계 단계가 있다
----------------------------------------------------------------------------------------------------
<h3>스키마 정의</h3>
<dl>
  <dt>스키마</dt>
  <dd>데이터베이스의 구조와 제약조건에 관한 전반적인 명세를 기술한 것</dd>
  <dd>db를 구성하는 데이터 개체, 속성, 관계 및 데이터 조작 시 데이터 값들이 갖는 제약조건 등을 전반적으로 정의</dd>
</dl>
<dl>
  <dt>개체 ( Entity )</dt>
  <dd>파일 처리 방식의 파일에서 레코드</dd>
</dl>
<dl>
  <dt>속성 Attribute</dt>
  <dd>파일 처리 방식의 파일에서 필드에 해당되는 것으로 개체의 성질을 나타냄</dd>
</dl>
<dl>
  <dt>관계 Relationship</dt>
  <dd>개체와 개체 또는 개체와 속성간의 관계</dd>
</dl>
<h3>스키마 특징</h3>
<p>데이터 사전에 저장함</p>
<p>다른 이름으로 메타데이터라고함</p>
<dl>
  <dt>데이터사전</dt>
  <dd>db에 저장되있는 모든 data 개체들에대한 정보를 유지 관리하는 시스템 ( 시스템 카탈로그라고도함 )</dd>
</dl>
<dl>
  <dt>스키마의 3계층</dt>
  <dd>개념스키마</dd>
  <dd>외부스키마</dd>
  <dd>내부스키마</dd>
</dl>
<dl>
  <dt>개념 스키마</dt>
  <dd>전체적인 뷰(데이터베이스의 논리적 구조)</dd>
</dl>
<dl>
  <dt>외부 스키마</dt>
  <dd>서브 스키마 = 사용자 뷰 ( 사용자나 응용 프로그래머가 각 개인의 입장에서 필요로하는 db베이스의 논리적 구조를 정의)</dd>
</dl>
<dl>
  <dt>내부 스키마</dt>
  <dd>db 의 물리적 저장 구조를 정의 (data저장방법기술)(시스템 설계자가 보는 관점의 스키마)</dd>
</dl>
<dl>
  <dt>논리적 데이터 모델</dt>
  <dd>개념적 모델링 과정에서 얻은 개념적 구조를 컴퓨터가 이해하고 처리할수있는 컴퓨터 세계의 환경에 맞도록 변환하는 과정</dd>
</dl>
<dl>
  <dt>논리적 데이터 모델의 품질 검증</dt>
  <dd>완성된 논리 데이터 모델이 기업에 적합한지를 확인하기 위해 품질을 검증하는 것( 5가지 방법이있음 ) </dd>
</dl>
구조(Structure)
  - 논리적으로 표현된 개체 타입들 간의 관계로서 데이터 구조 및 정적 성질을 표현
연산(Operation)
  - dv 에 저장된 실제 데이터를 처리하는 작업에 대한 명세로서 db를 조작하는 기본도구
제약 조건 (Constraint)
  - db 에 저장 될 수 있는 실제 데이터의 논리적인 제약 조건
db 언어
  - db 구축, 이용하기 위한 db 시스템과의 통신 수단
  - DBMS 를 통해 사용 가능
  - 기능과 사용 목적에 따라 데이터 정의 언어ㅡ 데이터 조작언어, 데이터 제어 언어로 구분
DDL(정의어)
  - DB 생성 , 제거
DML(조작어)
  - DB 검색, 사용
DCL(제어어)
  - DB 관리, 제어
속성의 특성에 따른 분류
  - 기본속성
  - 설계속성
  - 파생속성
================================================================
1)개념적 설계(정보 모델링,개념화 단계)(필요필드등 정보취합)
2)논리적 설계(데이터 모델링)(테이블설계)
3)물리적 설계(데이터 구조화)(물리적 저장장치)
4)데이터베이스 구현(file 로 생성 단계)
5)데이터 모델의 구성요소
- 구조 = 논리적으로 표현한 개체들 간의 관계를 표시
- 연산 = 데이터베이스에 저장된 실제 데이터를 처리하는 방법을 표시
- 제약조건 = 데이터베이스에 저장될수있는 실제 데이터의 논리적인 제약조건을 표시

E-R model = entity(독립체,실제 대상체) relationship(관계) model

부모 자식 관계
-부모 = 정보가 먼저 생성되는 쪽
-자식 = 부모의 정보를 가져다 쓰는 쪽

피터첸 = er 다이어그램 만든사람?

관계형 데이터 모델
- 가장 널리 사용되는 모델, 계층 모델과 망 모델의 복잡한 구조를 단순화시킨 모델

DB 설계
사용자의 요구사항을 분석, 컴퓨터에 저장할수있는 DB 의 구조에맞게 변형한 후 특정 DBMS 로 DB를 구현하여 
일반 사용자들이 사용하게 하는 것

개념적 설계 단계에서는 E-R 모델이 나온다 . 

논리적 설계 - 관계 DBMS 에서 E-R 도형을 릴레이션들로 사상(Mapping)
- 논리적 설계 이후 부터는 DBMS 의존적

물리적 설계 - 
논리적 구조로 표현된 데이터를 디스크 등의 물리적 저장장치에 저장할 수 있는 물리적 구조의 데이터로 변환하는 과정

물리적 설계 시 고려사항-
1. 인덱스의 구조 2.레코드 크기 3.파일에 존재하는 레코드 개수 4. 파일에 대한 트랜잭션의 갱신과 참조성향
5. 성능 향상을 위한 개념 스키마의 변경 여부 검토
6. 빈번한 질의와 트랜잭션들의 수행속도를 높이기 위한 고려
7. 시스템 운용 시 파일 크기의 변화 가능성

엔티티 ( Entity )(개체) -
업무의 관심 대상이되는 정보를 갖고있거나 그에 대한 정보를 알아야하는 유 무형의 사물이나 객체
- 시스템 구축 대상이되는 업무에서 필요하고 관리하고자하는 정보여야한다
- 일반적으로 2개 이상의 인스턴스가 존재해야 의미가 있다
- 반드시 하나 이상의 속성을 가져야한다.

튜플 (Tuple) (행)-
릴레이션을 구성하는 각각의 행
- 튜플의 수를 카디널리티 또는 기수라고함

속성 ( Attribute )(열) - 
DB 를 구성하는 가장 작은 논리적 단위
- 속성의 수 : Degree 또는 차수 
- 속성은 개체의 특성을 기술 
- 파일 구조상의 데이터 항목 또는 데이터 필드에 해당

도메인 (Domain) -
하나의 속성이 취할수있는 같은 타입의 원자값들의 집합
- 실제 속성 값이 나타날때 그 값의 합법 여부를 시스템이 검사하는데에도 이용됨

릴레이션 (Relation) (테이블)-
특징
한 릴레이션에 포함한 튜플들은 모두 상이함
한 릴레이션에 포함된 튜플 사이에는 순서가 없음
튜플들의 삽입, 삭제 등의 작업으로 인해 릴레이션은 시간에 따라 변함
릴레이션 스키마를 구성하는 속성들 간의 순서는 중요하지 않음
속성의 유일한 식별을 위해 속성의 명칭은 유일해야 하지만, 속성을 구성하는 값은 동일한 값이 있을 수 있음
릴레이션을 구성하는 튜플을 유일하게 식별하기 위해 속성들의 부분집합을 Key 로 설정함
속성의 값은 논리적으로 더이상 쪼갤수없는 원자 값만을 저장함

제약조건 - 
DB 에 저장되는 데이터의 정확성을 보장하기 위해 키를 이용하여 입력되는 데이터에 제한을 주는것
- 개체 무결성 제약, 참조 무결성 제약 등이 해당함

Key 키 -
DB 에서 조건에 만족하는 튜플을 찾ㄱ거나 순서대로 정렬할때 튜플들을 서로 구분할수있는 기준이되는 속성

후보키 ( Candidate Key)-
릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별하기 위해 사용하는
속성들의 부분집합으로 기본키로 사용할수있는 속성들
- 릴레이션에 있는 모든 튜플을 만족시키기 위한 특징
유일성 최소성을 만족해야한다 

기본키 ( Primary Key)-
후보키 중에서 선택한 Main Key 
- 한 릴레이션에서 특정 튜플을 유일하게 구별할수있는 속성
- Null 값을 가질수없음
- 기본키로 정의된 속성에는 동일한 값이 중복되어 저장될수없음

대체키 (Alternate Key)-
- 후보키가 둘 이상일때 기본키를 제외한 나머지 후보키들을 말함
- 보조키라고도 함

슈퍼키 (Super Key) - 
- 유일성만 있고 최소성이없는 속성 집합
- 한 릴레이션 내에 있는 속성들의 집합으로 구성된 키 

외래키 (Foreign Key)
- 관계 맺고있는 R1, R2 에서 릴레이션 R1 이 참조하고있는 릴레이션 R2 의 기본키와 같은 R1 릴레이션의 속성
- 사원과 부서에 서로 어트리부트 릴레이션이 없는 상황에서도 참조할수있다.
- 관계형 데이터 모델에서 참조되는 릴레이션의 기본키와 대응되어 릴레이션 간에 참조 관계를 표현하는데 중요한 도구
- 외래키로 지정되면 참조 릴레이션의 기본키에 없는 값은 입력할수없음
================================================================
요구조건 분석
개념적 설계
논리적 설계
물리적 설계

정규화:
  함수적 종속성 등의 종속성 이론을 이용해 잘못 설계된 관계형 스키마를 더 작은 속성의 세트로 쪼개서
  바람직한 스키마로 만들어가는 과정
목적:
  데이터 구조의 안정화를 최대화
  어떠한 릴레이션이라도 db 내에서 표현이 가능하게 만듦
  효과적인 검색 알고리즘을 생성
  중복을 배제해 삽입 삭제 갱신 이상의 발생을 방지
  데이터 삽입 시 릴레이션을 재구성할 필요성을 줄임
이상의 개념:
  정규화를 거치지 않으면 db 내에 데이터들이 불필요하게 중복되어 릴레이션 조작 시 예기치 못한 곤란한 현상이 발생
이상의 종류:
  삽입 이상 : 릴레이션에 데이터를 삽입할때 의도와는 상관없이 원하지 않는 값들도 함께 삽입되는 현상
  삭제 이상 : 릴레이션에서 한 튜플을 삭제할때 의도와는 상관없는 값들도 함께 삭제되는 연쇄 삭제
              현상이 일어나는 현상
  갱신 이상 : 릴레이션에서 한 튜플에있는 속성값을 갱신할때 일부 튜플의 정보만 갱신되어
              정보에 모순이 되는 현상
함수적 종속: 시간에 관계없이 항상 애트리뷰트 y 의 값이 오직 하나만 연관되어있을때 y 는 x 에 함수적 종속
완전 함수적 종속:
  여러 개의 속성이 모여 하나의 기본키를 이룰경우 기본키 전체가있어야하지만, 
  어떤 속성이 결정될때 완전 함수적 종속이라 할 수 잇음 
부분 함수적 종속:
  완전하게 함수적으로 종속하지 않으면 부분 함수적 종속성을 갖는데, 여러개의 속성이 모여서 하나의 기본키를 이룰경우
  기본키를 구성하는 부분 속성만으로도 결정되어지면 부분 함수 종속
이행 함수적 종속: 
  x-y , y-z 일때 x-z
정규화 과정 흐름도:
  비정규 relation
    제1정규형             (도메인이 원자값)
      제2정규형           (부분 함수적 종속 제거)
        제3정규형         (이행 함수적 종속 제거)
          BCNF 정규형 (Boyce-Codd Normal Form)      (결정자이면서 후보키가 아닌것 제거)
            제4정규형                   (다치 종속 제거)
              제5정규형                 (조인 종속성을 이용)
정규화의 필요성:
  정규화되지 못한 릴레이션을 조작할때 발생하는 Anomaly 현상의 근본 원인은
  여러 종류의 사실들이 하나의 릴레이션에 모두 표현되어있기 때문
================================================================
관계대수
  관계형 db 에서 원하는 정보와 그 정보를 어떻게 유도하는가를 기술하는 절차적인 방법
관계연산자
  Select
    릴레이션에서 주어진 조건을 만족하는 튜플(행)들을 선택하는 연산
  Project
    릴레이션에서 주어진 조건을 만족하는 속성들을 검색하는 연산
  Join
    공통 속성을 중심으로 두개의 릴레이션을 하나로 합쳐서 새로운 릴레이션을 만드는 연산
      Equi Join ( 동일 조인 )
      : 공통 속성 값 중복
      Natural Join ( 자연 조인 )
      : 공통 속성값 제거
  Division
    나누어지는 릴레이션인 A는 릴레이션 b의 모든 튜플에 연관되어있는 a의 튜플을 선택
  Union
    합병 가능한 두 릴레이션 A 또는 B 에 속하는 튜플들로 구성된 릴레이션
  Difference
    두 릴레이션에 존재하는 튜플의 차집합을 구하는 연산
  Cartesian Product
    A 에 속한 각 튜플 a 에 대해 b 에 속한 튜플 b 를 모두 접속시킨 튜플들(A,B)로 구성된 릴레이션
  
관계해석
  특징
    관계 데이터의 연산을 표현하는 방법으로 원하는 정보를 정의할때는 계산 수식을 사용
    관계해석은 원하는 정보가 무엇이라는 것만 정의하여 비절차적 특성을 가짐
    튜플 관계해석과 도메인 관계해석이있음
    질의어로 표현함

관계해석과 관계대수의 관계
  관계 DB 를 처리하는 기능과 능력면에서 동등
  관계대수로 표현한 식은 관계해석으로 표현할 수 있음

반정규화
  시스템의 성능 향상, 개발 및 운영의 편의성 등을 위해 정규화된 데이터 모델을
    통합, 중복, 분리하는 과정으로 의도적으로 정규화 원칙을 위배하는 행위
테이블 분할
  수평분할, 수직분할
중복테이블 추가
트리거
  :테이블의 이벤트에 반응해 자동으로 실행되는 작업을 의미
  :BEGIN 과 END 의 사이의 로직을 수행하라

시스템 카탈로그
  데이터베이스 시스템에서 데이터가 실제로 읽혀지거나 수정되기 전에 먼저 참조되는 파일
인덱스
  데이터 튜플에 빠르게 접근하기 위해 키값, 포인터 쌍으로 구성되어있는 데이터 구조
메타데이터
  데이터의 관리를 위한 데이터
쿼리 최적화
  DBMS 가 쿼리를 수행하는 여러 가지 방법들 중에서 가장 비용이 적게드는 방법을 찾는 과정

data directory
  데이터 사전에 수록된 데이터를 실제로 접근하는데 필요한 정보를 관리 유지하는 시스템












```
